(this["webpackJsonpreac-tac-toe"]=this["webpackJsonpreac-tac-toe"]||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),l=a(36),c=a.n(l),o=a(8),s=a(61),u=a(25);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var f=n.a.createElement("path",{d:"M15 9a3 3 0 0 0 3-3h2a5 5 0 0 1-5.1 5 5 5 0 0 1-3.9 3.9V17l5 2v1H4v-1l5-2v-2.1A5 5 0 0 1 5.1 11H5a5 5 0 0 1-5-5h2a3 3 0 0 0 3 3V4H2v2H0V2h5V0h10v2h5v4h-2V4h-3v5z"}),g=function(e){var t=e.svgRef,a=e.title,r=m(e,["svgRef","title"]);return n.a.createElement("svg",i({viewBox:"0 0 20 20",ref:t},r),a?n.a.createElement("title",null,a):null,f)},d=n.a.forwardRef((function(e,t){return n.a.createElement(g,i({svgRef:t},e))})),y=(a.p,a(26));function v(){var e=Object(y.a)(["\n  query getTurn {\n    turn @client\n  }\n"]);return v=function(){return e},e}function b(){var e=Object(y.a)(["\n  query getGameStatus {\n    status @client\n  }\n"]);return b=function(){return e},e}function h(){var e=Object(y.a)(["\n  query getGameboard {\n    data @client\n  }\n"]);return h=function(){return e},e}function p(){var e=Object(y.a)(["\n  query getScores {\n    x @client\n    o @client\n  }\n"]);return p=function(){return e},e}var x=Object(o.gql)(p()),O=Object(o.gql)(h()),w=Object(o.gql)(b()),E=Object(o.gql)(v()),j=function(e,t){e.cache.writeQuery({query:x,data:{x:t.x,o:t.o}}),localStorage.setItem("xScore",t.x),localStorage.setItem("oScore",t.o)},N=function(e,t){e.cache.writeQuery({query:O,data:{data:t}}),localStorage.setItem("gameboard",JSON.stringify(t))},S=function(e,t){e.cache.writeQuery({query:w,data:{status:t}}),localStorage.setItem("status",JSON.stringify(t))},I=function(e){var t=e.label,a=e.score;return n.a.createElement("div",{className:"flex flex-col ".concat("X"===t?"items-end pr-5":"pl-5")},n.a.createElement("span",{className:"text-xs"},"Player ",n.a.createElement("span",{className:"font-bold"},t)),n.a.createElement("span",{className:"text-3xl"},a),n.a.createElement("div",{className:"flex ".concat("X"===t&&"flex-row-reverse"," h-3")},Object(u.a)(Array(Number(a))).map((function(e,t){return n.a.createElement(d,{key:t,width:12,height:12,className:"fill-current text-yellow-600"})}))))},R=function(){var e=Object(o.useQuery)(x).data;return n.a.createElement("div",{className:"flex bg-teal-200 w-full h-24 text-gray-800 shadow-lg"},n.a.createElement("div",{className:"h-full flex flex-col justify-center items-end px-5"},n.a.createElement("h3",{className:"text-base sm:text-xl tracking-wide leading-5"},"React-Tac-Toe"),n.a.createElement("span",{className:"text-xs"},"with TypeScript")),n.a.createElement("div",{className:"grid grid-cols-2 divide-x divide-gray-800 ml-auto items-center px-5"},n.a.createElement(I,{label:"X",score:e.x}),n.a.createElement(I,{label:"O",score:e.o})))},P=a(39),q=a(64),k=a.n(q);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var A=n.a.createElement("path",{d:"M15.3 14.89l2.77 2.77a1 1 0 0 1 0 1.41 1 1 0 0 1-1.41 0l-2.59-2.58A5.99 5.99 0 0 1 11 18V9.04a1 1 0 0 0-2 0V18a5.98 5.98 0 0 1-3.07-1.51l-2.59 2.58a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41l2.77-2.77A5.95 5.95 0 0 1 4.07 13H1a1 1 0 1 1 0-2h3V8.41L.93 5.34a1 1 0 0 1 0-1.41 1 1 0 0 1 1.41 0l2.1 2.1h11.12l2.1-2.1a1 1 0 0 1 1.41 0 1 1 0 0 1 0 1.41L16 8.41V11h3a1 1 0 1 1 0 2h-3.07c-.1.67-.32 1.31-.63 1.89zM15 5H5a5 5 0 1 1 10 0z"}),G=function(e){var t=e.svgRef,a=e.title,r=X(e,["svgRef","title"]);return n.a.createElement("svg",Q({viewBox:"0 0 20 20",ref:t},r),a?n.a.createElement("title",null,a):null,A)},V=n.a.forwardRef((function(e,t){return n.a.createElement(G,Q({svgRef:t},e))})),W=(a.p,function(e){var t=e.message,a=e.resetGame;return n.a.createElement("div",{className:"absolute w-full h-full flex-1 bg-gray-800 bg-opacity-50 top-0 left-0 flex items-center justify-center cursor-pointer",onClick:a},n.a.createElement("div",{className:"flex flex-col items-center justify-center bg-teal-200 w-11/12 sm:w-auto py-64 sm:p-64 rounded-lg shadow-lg cursor-default",onClick:function(e){return e.stopPropagation()}},"Player X and Player O have tied!"===t?n.a.createElement(V,{width:114,height:114,className:"fill-current text-gray-800"}):n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{gravity:1.8,tweenDuration:5e3,recycle:!1}),n.a.createElement(d,{width:114,height:114,className:"fill-current text-yellow-600"})),n.a.createElement("span",{className:"text-2xl text-gray-800 mt-5"},t)))}),C=function(e){var t=e.label,a=Object(o.useQuery)(E).data;return n.a.createElement("div",{className:"flex flex-col items-center justify-center"},n.a.createElement("span",{className:"".concat(a.turn===t?"bg-pink-500":"bg-gray-800"," rounded-full w-20 h-20 flex items-center justify-center text-gray-100 text-3xl font-semibold")},t),n.a.createElement("span",{className:"mt-5 font-semibold ".concat(a.turn===t?"text-pink-500":"text-gray-800"," h-5")},"Player ",t),n.a.createElement("span",{className:"mt-5 font-semibold text-pink-500 h-5"},a.turn===t&&"Your turn!"))},H=a(38),J=function(e,t){var a="";return e<2?a+=t<2?"border-b border-r border-teal-200":"border-b border-teal-200":t<2&&(a+="border-r border-teal-200"),a},M=function(e){var t=e.i,a=e.j,l=e.value,c=Object(o.useApolloClient)(),s=Object(o.useLazyQuery)(O),i=Object(H.a)(s,2),m=i[0],f=i[1].data,g=Object(o.useLazyQuery)(E),d=Object(H.a)(g,2),y=d[0],v=d[1].data;Object(r.useEffect)((function(){var e=!0;return e&&(m(),y()),function(){e=!1}}),[m,y]);var b=function(){if(!l){var e=Object(u.a)(f.data),r=Object(u.a)(e[t]);r[a]=v.turn,e[t]=r,N(c,e),function(e,t){e.cache.writeQuery({query:E,data:{turn:t}}),localStorage.setItem("turn",t)}(c,"X"===v.turn?"O":"X")}};return n.a.createElement("div",{className:"flex items-center justify-center text-6xl text-gray-100 ".concat(""===l?"cursor-pointer hover:bg-gray-700":"cursor-default"," ").concat(J(t,a)),onClick:b,onKeyDown:b,role:"button",tabIndex:0},l)},z=function(e){for(var t=!0,a=0;a<e.length;a++){for(var r=0,n=0;n<e.length;n++)r+=Number(B.get(e[a][n]))||0,""===e[n][a]&&(t=!1);if(3===r)return D;if(-3===r)return L}for(var l=0;l<e.length;l++){for(var c=0,o=0;o<e.length;o++)c+=Number(B.get(e[o][l]))||0;if(3===c)return D;if(-3===c)return L}var s=(B.get(e[0][0])||0)+(B.get(e[1][1])||0)+(B.get(e[2][2])||0);if(3===s)return D;if(-3===s)return L;var u=(B.get(e[0][2])||0)+(B.get(e[1][1])||0)+(B.get(e[2][0])||0);return 3===u?D:-3===u?L:t?T:_},B=new Map([["X",1],["O",-1]]),D={status:"WON",winner:"X"},L={status:"WON",winner:"O"},T={status:"DRAW",winner:""},_={status:"IN_PROGRESS",winner:""},F=function(){var e=Object(o.useApolloClient)(),t=Object(o.useQuery)(x).data,a=Object(o.useQuery)(O).data,l=Object(o.useQuery)(w).data;Object(r.useEffect)((function(){var r=z(a.data);"IN_PROGRESS"!==r.status&&(N(e,[["","",""],["","",""],["","",""]]),"X"===r.winner?j(e,Object(P.a)({},t,{x:Number(t.x)+1})):"O"===r.winner&&j(e,Object(P.a)({},t,{o:Number(t.o)+1})),S(e,r))}),[t,a.data,e]);var c=function(){S(e,{status:"IN_PROGRESS",winner:""})};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"bg-teal-200 container mx-auto h-full rounded-lg shadow-lg flex flex-col-reverse sm:flex-row"},n.a.createElement("div",{className:"my-12 sm:w-1/5 sm:m-5 grid grid-cols-2 sm:grid-rows-2 sm:grid-cols-1 divide-x sm:divide-y sm:divide-x-0 divide-gray-800"},n.a.createElement(C,{label:"X"}),n.a.createElement(C,{label:"O"})),n.a.createElement("div",{className:"flex-1 mx-2 my-2 sm:m-5 sm:ml-0 p-3 bg-gray-800 rounded-lg shadow-lg grid grid-cols-3 grid-rows-3"},a.data.map((function(e,t){return e.map((function(e,a){return n.a.createElement(M,{key:e+t.toString()+a.toString(),i:t,j:a,value:e})}))})))),"WON"===l.status.status&&n.a.createElement(W,{message:"Player ".concat(l.status.winner," Wins!"),resetGame:c}),"DRAW"===l.status.status&&n.a.createElement(W,{message:"Player X and Player O have tied!",resetGame:c}))},K=(a(101),function(){return n.a.createElement(s.RecoilRoot,null,n.a.createElement("div",{className:"bg-gray-800 font-mono h-screen flex flex-col"},n.a.createElement(R,null),n.a.createElement("div",{className:"p-2 sm:p-10 flex-1"},n.a.createElement(F,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y,$=new o.ApolloClient({uri:"http://localhost:3000/graphql",cache:new o.InMemoryCache({})});(Y=$.cache).writeQuery({query:x,data:{x:Number(localStorage.getItem("xScore"))||0,o:Number(localStorage.getItem("oScore"))||0}}),Y.writeQuery({query:O,data:{data:localStorage.getItem("gameboard")?JSON.parse(localStorage.getItem("gameboard")||"[]"):[["","",""],["","",""],["","",""]]}}),Y.writeQuery({query:w,data:{status:localStorage.getItem("status")?JSON.parse(localStorage.getItem("status")||"{}"):{status:"IN_PROGRESS",winner:""}}}),Y.writeQuery({query:E,data:{turn:localStorage.getItem("turn")||"X"}}),c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(o.ApolloProvider,{client:$},n.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(103)}},[[65,1,2]]]);
//# sourceMappingURL=main.c5624734.chunk.js.map